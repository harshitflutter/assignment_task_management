# Assignment Task Management

A modern, offline‚Äëfirst task management application built with Flutter, Firebase, and Clean Architecture principles. It provides seamless task creation, editing, attachments, and background sync with conflict resolution.

## Features

- Offline‚Äëfirst local storage (Hive)
- Firebase authentication ready (email/password via `firebase_auth`)
- Firestore sync with conflict detection and resolution UI
- Task CRUD with due date and status
- File/image attachments with Firebase Storage upload
- Connectivity awareness (sync auto-trigger when online)
- Modern UI with Flutter + Bloc state management

## üõ† Tech Stack

### Frontend

- **Flutter**: 3.x
- **Dart**: Latest stable
- **State Management**: Bloc/Cubit (flutter_bloc)
- **UI Framework**: Material Design + ScreenUtil

### Backend & Services

- **Firebase Authentication**: User management (email/password)
- **Cloud Firestore**: Tasks storage and sync
- **Firebase Storage**: File/image attachments
- **Connectivity Plus**: Online/offline detection

### Key Dependencies

```yaml
dependencies:
  flutter_bloc: ^9.1.1
  connectivity_plus: ^6.0.5
  firebase_auth: ^6.0.2
  cloud_firestore: ^6.0.1
  firebase_storage: ^12.3.4
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  flutter_screenutil: ^5.9.3
  image_picker: ^1.2.0
  file_picker: ^10.3.3
```

## üìÅ Project Structure

```
lib/
  app.dart                      # App root
  main.dart                     # Entry point
  firebase_options.dart         # Firebase config
  src/
    core/
      constants/                # Strings, colors, styles
      utils/                    # Snackbar, file utils, etc.
    features/
      auth/                     # Sign in
      tasks/
        data/                   # Repo impl, local/remote services
        domain/                 # Entities, repos
        presentation/           # Pages, cubits, widgets
      no_internet/              # No internet banner
    shared/
      presentation/             # Shared widgets (e.g., image_viewer)
```

## Data Model (Task)

- `id: String`
- `title: String`
- `description: String`
- `dueDate: DateTime`
- `status: TaskStatus (pending|completed)`
- `attachmentPath: String?` (local path or Firebase Storage URL)
- `attachmentName: String?`
- `createdAt: DateTime`
- `updatedAt: DateTime`
- `userId: String`
- `isSynced: bool`
- `isDeleted: bool`
- `attachmentRemoved: bool`

## Offline‚ÄëFirst Sync

- All writes go to local Hive immediately (optimistic UI updates)
- When online, background sync uploads unsynced tasks and downloads remote updates
- Attachment handling:
  - Local file paths are uploaded to Firebase Storage, then replaced with download URLs
  - Removing an attachment sets `attachmentRemoved` and deletes the remote file during sync

## Conflict Detection & Resolution

Conflicts are detected during upload and download phases. When detected, the app navigates to a dedicated Conflict Resolution page where the user can choose which version to keep.

Important rules in this build:

- Conflict comparison fields: title, description, due date only
  - Attachments (path/name) and status are ignored for conflict detection
- A conflict occurs when:
  - Local task is unsynced AND content differs from cloud; or
  - Local task is synced BUT the cloud version is significantly newer AND content differs

Resolution options:

- Keep Local
- Keep Cloud

Deleting cases:

- If local deleted but cloud modified ‚Üí conflict, choose which to keep
- If cloud deleted but local modified ‚Üí conflict, choose which to keep

## Getting Started

### Prerequisites

- Flutter SDK installed (`flutter --version`)
- Dart SDK (bundled with Flutter)
- Xcode (iOS) or Android Studio (Android) with device/emulator
- Firebase project (iOS + Android apps configured)

### Installation

1) Install dependencies

```bash
flutter pub get
```

2) Firebase Setup

- Android: place `android/app/google-services.json`
- iOS: place `ios/Runner/GoogleService-Info.plist`
- Ensure `firebase_options.dart` exists (generated by FlutterFire CLI) and matches your Firebase apps

4) Run the app

```bash
flutter run
```

## Build & Deploy

```bash
### Android

flutter build apk --release

### iOS

flutter build ios
```

## üß™ Testing

```bash
flutter test
```

## Features Overview

- Create/Edit Task: opens form with title, description, due date and optional attachment
- Edit with Attachment: existing attachment persists unless explicitly removed or replaced
- Manual Sync: triggers conflict detection; a popup appears only when title/description/due date differ per rules

## Troubleshooting

- Conflicts not appearing on manual sync:
  - Ensure differences are in title/description/due date (attachments/status are ignored)
  - Confirm device is online; conflict detection runs during sync

- Attachment disappears after editing title:
  - Fixed in `FormCubit.copyWith` to preserve attachment when updating other fields

- Firebase errors (permission/auth):
  - Verify Firebase rules and that user is authenticated
  - Ensure `google-services.json` / `GoogleService-Info.plist` are correct

- Sync not triggering:
  - Connectivity is required; auto-sync triggers when online
  - Use manual sync action in UI (if present) to force a sync



## Author

**Harhit Bhimani**

- GitHub: https://github.com/harshitflutter
- Email: harshit.flutter@gmail.com


## License

This project is provided as-is for assignment/demo purposes.
